<!DOCTYPE html>
<html lang=pl ng-app="msgsubmit">

<head>
    <meta charset="utf-8">
    <title>ChatSPA</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script src="msgsubmit.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.9.0/firebase.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyD1icZKTIdK5WYmqCneza7uuuxCWtnSiP0",
            authDomain: "chatspa-fbf2b.firebaseapp.com",
            databaseURL: "https://chatspa-fbf2b.firebaseio.com",
            projectId: "chatspa-fbf2b",
            storageBucket: "chatspa-fbf2b.appspot.com",
            messagingSenderId: "402031867380"
        };
        firebase.initializeApp(config);
    </script>
    <link rel="stylesheet" type="text/css" href="style.css">
	<script>
		function blockUINick() {
			document.getElementById("pic").style.display = "none";
			document.getElementById("yt").style.display = "none";
			document.getElementById("addr").style.display = "none";
			document.getElementById("apic").style.display = "none";
			document.getElementById("ayt").style.display = "none";
			var nick_prompt = prompt("Enter your nickname before using chat. :)");
			
			var selectedDueDateField = document.getElementById("nickname_field");
			var element = angular.element(selectedDueDateField);
			element.val(nick_prompt);
			element.triggerHandler('input');
        }
        function multimediaButtons() {
		    document.getElementById("mm").style.display = "none";
		    document.getElementById("pic").style.display = "inline";
		    document.getElementById("yt").style.display = "inline";
        }
        function addElement(x) {
            document.getElementById("pic").style.display = "none";
            document.getElementById("yt").style.display = "none";
            document.getElementById("addr").style.display = "inline";
            if(x==0){document.getElementById("apic").style.display = "inline";}
            else {document.getElementById("ayt").style.display = "inline"}
        }
        function mlcean() {
			document.getElementById("addr").style.display = "none";
			document.getElementById("apic").style.display = "none";
			document.getElementById("ayt").style.display = "none";
			document.getElementById("mm").style.display = "inline";
        }
		
		$("#btn_room_general").click(function(){
			$('#room_name').html('General');
		});
		
		$("#btn_room_technology").click(function(){
			$('#room_name').html('Technology');
		});

	</script>
</head>
<body onload="blockUINick()">
    <div id="whole_page" ng-controller="chatcore">
	
        <div class="chatbox" >
			
			<div id="welcome_box">
				<span id="weclome_msg">Chatujesz jako: </span>
				<input id="nickname_field" type="text" ng-model="core.nick" readonly/>
					
				<center><span id="room_name">General</span><center>
				
				
			</div>
			
			<div id="rooms_panel">
				<input type="button" class="btns_rooms" id="btn_room_general" value="General" />
				<input type="button" class="btns_rooms" id="btn_room_technology" value="Technology" />
				<input type="button" class="btns_rooms" id="btn_room_technology" value="" />
			
			</div>
			
			<div id="chat_panel">
				<div id="boxchat" class="chat_messages" ng-init="chatsync()" >
				</div>
				<div>
					<input type="button" id="geo" ng-click="geolock()" value="Pokaż gdzie jestem">
					<input type="button" id="mm" onclick="multimediaButtons()" value="Dodaj multimedia" />
					<input type="button" id="pic" onclick="addElement(0)" value="Dodaj zdjęcie" />
					<input type="button" id="yt" onclick="addElement(1)" value="Dodaj film z youtube" />
					<input type="text" id="addr" />
					<input type="button" id="apic" onclick="mlcean()" ng-click="sendpic()" value="Dodaj obrazek" />
					<input type="button" id="ayt" onclick="mlcean()" ng-click="sendyt()" value="Dodaj filmik" />
					</label>
					<br>
					<label>
						<textarea id="area" rows="3" cols="70" ng-keypress="send_on_enter($event)" ng-model="core.msg" placeholder="Napisz wiadomość.." ></textarea>
					</label>
					<input id="send" type="button"  ng-click="send()" value="Wyślij" />
					<input id="clear" type="button" ng-click="clear()" value="Czyść" />

				</div>
			</div>
        </div>
    </div>
</body>

</html>